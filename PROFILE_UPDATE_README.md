# HomeCloud Frontend - Profile Page Updates

## Обзор изменений

Фронтенд был значительно обновлен для поддержки новых полей пользователя из auth-service и улучшения пользовательского опыта.

## Новые возможности

### 1. Расширенная информация о пользователе

**Новые поля профиля:**
- `is_active` - статус аккаунта (активный/неактивный)
- `is_email_verified` - верификация email
- `storage_quota` - квота хранилища
- `used_space` - использованное место
- `role` - роль пользователя
- `is_admin` - права администратора
- `last_login_at` - время последнего входа
- `failed_login_attempts` - количество неудачных попыток входа
- `locked_until` - время блокировки аккаунта
- `two_factor_enabled` - включена ли двухфакторная аутентификация

### 2. Улучшенный интерфейс профиля

**Структура профиля разделена на секции:**
- **Basic Information** - основная информация
- **Account Status** - статус аккаунта
- **Storage** - информация о хранилище
- **Security** - информация о безопасности (показывается только при наличии проблем)

**Визуальные улучшения:**
- Статус-бейджи с цветовой индикацией
- Прогресс-бар использования хранилища
- Модальные окна для редактирования
- Адаптивный дизайн для мобильных устройств

### 3. Функциональность редактирования

**Редактирование профиля:**
- Изменение username
- Валидация данных
- Обработка ошибок

**Смена пароля:**
- Проверка текущего пароля
- Валидация нового пароля
- Подтверждение пароля

**Верификация email:**
- Кнопка повторной отправки верификации
- Отображение статуса верификации

### 4. Улучшенная обработка ошибок

**Система уведомлений:**
- Toast-уведомления с анимацией
- Цветовая индикация типа сообщения
- Автоматическое исчезновение

**Валидация:**
- Проверка полей форм
- Валидация email
- Проверка длины пароля

### 5. Безопасность

**Проверки безопасности:**
- Отображение блокировки аккаунта
- Предупреждения о неудачных попытках входа
- Уведомления о необходимости верификации email

## Технические изменения

### Обновленные файлы:

1. **profile.html** - новая структура с секциями и модальными окнами
2. **profile.js** - полная переработка с поддержкой всех новых полей
3. **dashboard.js** - улучшенная обработка ошибок и уведомления
4. **auth.js** - улучшенная валидация и обработка ошибок
5. **style.css** - новые стили для секций, бейджей, модальных окон

### Новые CSS классы:

```css
.info-section          /* Секции информации */
.status-badge          /* Статус-бейджи */
.storage-progress-*    /* Прогресс-бар хранилища */
.modal                 /* Модальные окна */
.notification          /* Уведомления */
```

### API интеграция:

**Поддерживаемые эндпоинты:**
- `GET /api/v1/auth/me` - получение профиля
- `PATCH /api/v1/users/{id}` - обновление профиля
- `POST /api/v1/auth/logout` - выход из системы
- `POST /api/v1/auth/resend-verification` - повторная отправка верификации

## Демо-режим

При недоступности backend сервиса фронтенд автоматически переключается в демо-режим:
- Отображаются демо-данные
- Показывается предупреждение
- Функциональность остается доступной для тестирования

## Тестирование

Для тестирования создан файл `test_profile.html` с предзаполненными данными.

## Совместимость

- Поддерживает все новые поля из auth-service
- Обратная совместимость с существующими полями
- Graceful degradation при отсутствии backend
- Адаптивный дизайн для всех устройств

## Планы развития

1. Добавление двухфакторной аутентификации
2. Интеграция с file-service для отображения файлов
3. Добавление настроек уведомлений
4. Поддержка тем оформления
5. Экспорт данных профиля 